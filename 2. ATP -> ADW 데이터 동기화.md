이번 실습에서는 오라클 Database인 ATP(Autonomous Transaction Processing)에서 ADW(Autonomous Data Warehouse)로의 데이터 동기화를 진행합니다.

## 작업 절차
|위치|작업 내용|
|---------|-----------------|
|A. ATP(소스 데이터베이스)| ATP GoldenGate User Unlock |
|                 | Supplemental Logging 활성화 |
|B. ADW(타겟 데이터베이스)| ADW 생성                   |
|                  | ADW GoldenGate User Unlock|
|                  | Target Database DDL 수행 |
|C. OCI-GG | OCI GoldenGate 프로비저닝 |
|       | OCI-GG DB Connection 생성 |
|       | Extract Porcess 설정 |
|       | Replicat Process 설정 |
|       | ATP -> ADW 데이터 동기화 확인 |

## A. 소스 데이터베이스 설정
### ATP GoldenGate User Unlock
1. OCI 콘솔 내에서 좌측상단 메뉴 버튼을 클릭하고, Oracle Database > Autonomous Transaction Processing을 클릭합니다.
2. ATP Database의 세부 상세 페이지에서 Database Actions 버튼을 클릭합니다.

![image](https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/dfd716a6-4374-4644-b738-039ae838cf37)

3. Database Actions > Database Users(데이터베이스 사용자)를 클릭합니다.
4. OGG Configuration을 위한 GGADMIN 유저를 Unlock합니다. GGADMIN 유저 옆에 <img width="36" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/548768b1-5be2-43cc-95ae-62bc3cd4b79e"> 버튼을 누르고 Edit(편집)을 클릭합니다. 해당 유저를 위한 비밀번호를 ‘WElcome123__’로 설정하고 ‘Account is locked(계정이 잠겨 있습니다)’를 해제 하여 Unlock 해줍니다. ‘Apply Changes(변경사항 적용)’ 버튼을 클릭합니다.

<img width="767" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/ce26f0c6-0e92-4aa0-9f68-a0cb1d749b81">


### Supplemental Logging을 활성화
1. Database Actions > SQL을 클릭합니다.
2. SQL 워크시트 창에서 아래의 작업을 수행합니다. Livelabs 전체 데이터를 sync하기 전에 단계별 구성을 확인하기 위해서 테스트 테이블을 하나 생성합니다. 
```
alter pluggable database add supplemental log data;
create table test ( num NUMBER(4) );
commit;
```

<img width="752" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/ec2509aa-aaf9-4547-b3d7-fba240ca58c9">


## B. 타겟 데이터베이스 구성
### 타겟 데이터베이스 생성
1. 좌측 상단 <img width="36" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/e383f362-0489-4a58-ba72-4165b41bdd99"> (네비게이션 메뉴)를 클릭하고, Oracle Database > Autonomous Data Warehouse를 클릭합니다.
2. Create Autonomous Database 버튼을 클릭합니다.
3. ADW 정보를 아래와 같이 입력합니다. 입력 후, Create Autonomous Database버튼을 클릭합니다.
```
Compartment: 생성하고자 하는 컴파트먼트를 선택합니다.
Display name: TARGETADW
Database name: TARGETADW
Choose workload type: Data Warehouse
Deployment type: Serverless
Database version: 19c
ECPU: 2
Storage: 1
Password: WElcome123__
Network Access: Secure access from every where
```
<img width="1132" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/4d97bab3-56a9-4ddf-84f7-6f36ef30fc56">

### ADW GoldenGate User Unlock
1. OGG Configuration을 위한 GGADMIN 유저를 Unlock합니다. GGADMIN 유저 옆에 <img width="36" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/548768b1-5be2-43cc-95ae-62bc3cd4b79e"> 버튼을 누르고 Edit(편집)을 클릭합니다. 해당 유저를 위한 비밀번호를 ‘WElcome123__’로 설정하고 ‘Account is locked(계정이 잠겨 있습니다)’를 해제 하여 Unlock 해줍니다. ‘Apply Changes(변경사항 적용)’ 버튼을 클릭합니다.

<img width="767" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/ce26f0c6-0e92-4aa0-9f68-a0cb1d749b81">

### Target Database DDL 수행
1. 유저까지 구성이 완료 되었으면, 데이터 integration을 위해 Target Database의 테이블을 생성합니다. 좌측 상단의 <img width="36" alt="image" src="https://github.com/oraclekr-data-platform/ODWS-S02-Data-Replication/assets/150218254/e383f362-0489-4a58-ba72-4165b41bdd99"> (네비게이션 메뉴)를 클릭하여, SQL을 클릭합니다.

2. DDL을 수행합니다.  
```
create table test ( num NUMBER(4) );
CREATE TABLE "ADMIN"."LIVELABS" 
( "ID" NUMBER(19,0) PRIMARY KEY,
  "TITLE" VARCHAR2(4000 BYTE), 
  "URL" VARCHAR2(256 BYTE), 
  "TYPE" VARCHAR2(64 BYTE), 
  "DESCRIPTION" VARCHAR2(4000 BYTE),
  "DURATION" VARCHAR2(64 BYTE), 
  "PUBLISHED_TIME" VARCHAR2(64 BYTE),
  "TITLE_KO" VARCHAR2(4000 BYTE), 
  "DESC_KO" VARCHAR2(4000 BYTE), 
  "DURATION_KO" VARCHAR2(64 BYTE),  
  "OCI_PRODUCTS" VARCHAR2(4000 BYTE),
  "KEY_PHRASE" VARCHAR2(4000 BYTE) );
```

## C. OCI-GG 구성
